<div class="simulacion-container">

  <!-- BotÃ³n Volver -->
  <div class="toolbar">
    <button class="btn-volver" (click)="navigateToMenuInicio(teamId)" [disabled]="!isFinished()">
      <span class="arrow">&larr;</span> 
      @if (isFinished()) { VOLVER AL MENÃš } @else { JUGANDO... }
    </button>
  </div>

  <!-- MARCADOR EN VIVO -->
  <div class="live-scoreboard">
    
    <!-- Reloj -->
    <div class="timer-box">
      @if (!isFinished()) {
        <div class="live-dot"></div> VIVO
      } @else {
        FINAL
      }
      <span>{{ currentMinute() }}'</span>
    </div>

    <!-- Local -->
    <div class="team-box">
      <span class="team-name">{{ homeTeam.name }}</span>
    </div>

    <!-- Resultado -->
    <div class="score-display">
      <span>{{ score().home }}</span>
      <span>-</span>
      <span>{{ score().away }}</span>
    </div>

    <!-- Visitante -->
    <div class="team-box">
      <span class="team-name">{{ awayTeam.name }}</span>
    </div>

  </div>

  <!-- RELATO MINUTO A MINUTO -->
  <div class="match-log-container">
    
    @if (events().length === 0) {
      <p style="text-align:center; color:#999; margin-top:20px;">El partido estÃ¡ por comenzar...</p>
    }

    @for (e of events().slice().reverse(); track e.minute + '-' + e.playerId) {
      
      <div class="event-row" 
           [class.goal]="e.type === 'goal'"
           [class.yellow-card]="e.type === 'yellow'"
           [class.red-card]="e.type === 'red'">
        
        <div class="event-time">{{ e.minute }}'</div>
        
        <div class="event-icon">
          @switch (e.type) {
            @case ('assist') { ðŸ‘Ÿâš½ }
            @case ('goal') { âš½ }
            @case ('yellow') { ðŸŸ¨ }
            @case ('red') { ðŸŸ¥ }
            @default { ðŸ”¹ }
          }
        </div>

        <div class="event-text">
          @if (e.type === 'goal') {
            <strong>Â¡GOOOL!</strong> de {{ getPlayerName(getTeamById(e.teamId), e.playerId) }}
             ({{ getTeamById(e.teamId)?.shortName }})@if (e.assistId) {
                <span class="asist"> ( ðŸ‘Ÿâš½ {{ getPlayerName(getTeamById(e.teamId), e.assistId) }})</span>
              }
          } 
          @else if (e.type === 'yellow') {
            Tarjeta Amarilla para {{ getPlayerName(getTeamById(e.teamId), e.playerId) }}
          }
          @else if (e.type === 'red') {
            <strong>Â¡EXPULSADO!</strong> {{ getPlayerName(getTeamById(e.teamId), e.playerId) }} deja la cancha.
          }
          @else {
            {{ e.type }} - {{ getPlayerName(getTeamById(e.teamId), e.playerId) }}
          }
        </div>

      </div>
    }

  </div>

</div>